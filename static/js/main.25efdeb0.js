(()=>{"use strict";var e={6125:(e,t,n)=>{n.r(t),n.d(t,{default:()=>Rt});var r=n(9526),o=n(3535),a=n(885),i=n(3292),u=n(5640),l=n(4333),s=n(1133),c=n(6032),f=n(5588),d=n(9233),h=n(1451),p=n(3497);function v(e){var t=new Set(y);for(var n of e)t.delete(n);return 0==t.size?y[Math.floor(Math.random()*y.length)]:Array.from(t)[Math.floor(Math.random()*t.size)]}var y=["#B66DFF","#FF2A95","#FFB6DB","#4673FF","#00A6A6","#8CCAFF","#FB6E6E","#FFB488","#24FF24"],g="#7A7B7A",m="white",b="#eac8f7",w="black",j=n(4942),x=n(6483),O=n(7557);function S(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function C(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?S(Object(n),!0).forEach((function(t){(0,j.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):S(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var P="black",k="white",E="darkgrey",T=40,D=l.default.create({inputButton:{alignItems:"center",borderWidth:2,borderRadius:15,marginHorizontal:5}});const W=function(e){var t=e.disabled,n=e.style,r=e.name,o=e.onPress,a=(null==n?void 0:n.backgroundColor)||k,i=t?(null==n?void 0:n.disabledCountourColor)||E:(null==n?void 0:n.countourColor)||P;return(0,O.jsx)(h.default,{style:C(C({},D.inputButton),{},{backgroundColor:a,borderColor:i}),onPress:o,disabled:t,children:(0,O.jsx)(x.default,{name:r,size:(null==n?void 0:n.size)||T,color:i})})};var A=l.default.create({container:{flex:1,flexDirection:"row"},inputHolder:{flex:5,borderWidth:2,borderRadius:15,marginHorizontal:5,justifyContent:"center",alignItems:"center",backgroundColor:m},inputText:{fontSize:20,width:"90%",textAlign:"center"}});const I=function(e){var t=e.onAddWord,n=r.useState(""),o=(0,a.default)(n,2),i=o[0],u=o[1],l=function(e){t(e),u("")},c=""===i;return(0,O.jsxs)(s.default,{style:A.container,children:[(0,O.jsx)(s.default,{style:A.inputHolder,children:(0,O.jsx)(p.default,{style:A.inputText,autoFocus:!0,blurOnSubmit:!0,value:i,onChangeText:function(e){u(e)},onSubmitEditing:function(e){var t=e.nativeEvent.text;t&&l(t)}})}),(0,O.jsx)(W,{disabled:c,name:"add",onPress:function(){return l(i)},style:{backgroundColor:m,disabledCountourColor:g,countourColor:w}})]})};var z=n(7132),M=n(8576),R=n(9980),V=n(5671),F=n(3144),N=n(2982),L=n(136),H=n(2963),_=n(1120),B=n(8664);function G(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,_.default)(e);if(t){var o=(0,_.default)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return(0,H.default)(this,n)}}var K=function(e){(0,L.default)(n,e);var t=G(n);function n(){return(0,V.default)(this,n),t.call(this)}return(0,F.default)(n,null,[{key:"Build",value:function(e,t){var r=new n,o=function(e){var t=[];e.forEach((function(e){return t.push(0)}));for(var n=1,r=0,o=0,a=.5,i=t.length,u=0;u<i;u++)if(e[u]){var l=(e[u]||0)+1;t[u]=n*(1-1/l),n-=t[u]}else o+=1,r+=n*a,n*=a;for(var s=0;s<i;s++)e[s]&&(t[s]+=(n+r)/(i-o));return t.map((function(t,n){return e[n]?t/e[n]:0}))}(t);for(var i of e){for(var u=(0,a.default)(i,2),l=u[0],s=u[1],c=0,f=0;f<s.length;f++)c+=o[f]*s[f]||0;r.push({word:l,value:parseFloat(c.toFixed(5))})}return r}},{key:"Copy",value:function(e){return(0,N.default)(e)}}]),n}((0,B.default)(Array));var U=function(){function e(t){(0,V.default)(this,e),this.name=t,this.connections=new Map,this.connectionSum=[]}return(0,F.default)(e,[{key:"addConnection",value:function(e,t){this.nullCache();var n=this.connections.get(e)||[];for(0==n.length&&this.connections.set(e,n),n[t]=(n[t]||0)+1;this.connectionSum.length<=t;)this.connectionSum.push(0);this.connectionSum[t]+=1}},{key:"nullCache",value:function(){this.normalCache=void 0,this.wordMapCache=void 0}},{key:"GetWordNormal",value:function(){return this.normalCache||(this.normalCache=K.Build(this.connections,this.connectionSum)),K.Copy(this.normalCache)}},{key:"GetWordMap",value:function(){var e=this;return this.wordMapCache||(this.wordMapCache=new Map,this.GetWordNormal().forEach((function(t){var n=t.word,r=t.value;return e.wordMapCache.set(n,r)}))),this.wordMapCache}}],[{key:"GetSorted",value:function(e,t){var n=Array.from(e);return t&&""!=t?(n.sort((function(e,n){return(e.GetWordMap().get(t)||0)-(n.GetWordMap().get(t)||0)})),n):n}}]),e}();var q=n(2826),J=function(){function e(t,n,r,o,a){(0,V.default)(this,e),this.left=t,this.bottom=n,this.width=r,this.height=o,this.color=a}return(0,F.default)(e,null,[{key:"Zero",value:function(){return{left:0,bottom:0,width:0,height:0,color:"white"}}}]),e}();function Z(e,t,n){return(1-e)*t+e*n}function Q(e,t,n,r){var o=e[t-1],a=o?o.left+o.width:0;e.splice(t,0,{left:a,width:0,height:n,bottom:0,color:r})}function X(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,_.default)(e);if(t){var o=(0,_.default)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return(0,H.default)(this,n)}}var Y=function(e){(0,L.default)(n,e);var t=X(n);function n(){(0,V.default)(this,n);for(var e=arguments.length,r=new Array(e),o=0;o<e;o++)r[o]=arguments[o];return t.call.apply(t,[this].concat((0,N.default)(null!=r?r:[])))}return(0,F.default)(n,[{key:"ToRectangle",value:function(e){return this.map((function(t){return new J(t.start*e.width,0,t.width*e.width,e.height,t.color)}))}}]),n}((0,B.default)(Array));function $(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,_.default)(e);if(t){var o=(0,_.default)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return(0,H.default)(this,n)}}var ee=function(e){(0,L.default)(n,e);var t=$(n);function n(e,r){var o;(0,V.default)(this,n);var a=e.length>0&&r.size>0,i=e.map((function(e){var t=r.get(e.word);return t||(a=!1),{color:t,value:e.value}}));return(o=t.call.apply(t,[this].concat((0,N.default)(i)))).IsValid=!1,o.IsValid=a,o}return(0,F.default)(n,[{key:"isEqualTo",value:function(e){var t=this.length;if(t!=e.length)return!1;for(var n=0;n<t;n++)if(this[n].color!=e[n].color||this[n].value!=e[n].value)return!1;return!0}},{key:"ToGradient",value:function(){var e=[],t=0;return this.forEach((function(n){e.push({color:n.color,start:t,width:n.value}),t+=n.value})),(0,q.default)(Y,e)}},{key:"getDominantColor",value:function(){var e=0,t=void 0;return this.forEach((function(n){n.value>e&&(t=n.color,e=n.value)})),t}}]),n}((0,B.default)(Array)),te=n(4637),ne=n(8521),re=n(4755),oe=n(9316),ae=n(6625),ie=n(1968);function ue(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function le(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ue(Object(n),!0).forEach((function(t){(0,j.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ue(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var se=function(){var e=function(e,t,n){return(1-e)*t+e*n};return e._closure={},e.asString="function lerpWorklet(progress,start,end){return(1-progress)*start+progress*end;}",e.__workletHash=6785042939311,e.__location="C:\\Users\\holyh\\source\\repos\\ReactTest\\wordApp\\src\\screens\\synonyms\\colorChart\\animatedRectangle.tsx (65:0)",e}();const ce=function(e){var t=e.animationProgress,n=e.transition,o=e.style,a=e.dataKey,i=e.registerTransitionUpdates,u=(0,re.useSharedValue)(n);(0,r.useEffect)((function(){null==i||i(a,(function(e){return u.value=e}))}),[a,i]);var l=(0,r.useMemo)((function(){return le({position:"absolute"},o)}),[o]),s=(0,ae.useAnimatedStyle)(function(){var e=function(){var e=u.value,n=e.start,r=e.end,o=t.value;return le(le({},l),{},{left:se(o,n.left,r.left),bottom:se(o,n.bottom,r.bottom),width:se(o,n.width,r.width),height:se(o,n.height,r.height),backgroundColor:r.color})};return e._closure={transitionRef:u,animationProgress:t,staticStyle:l,lerpWorklet:se},e.asString="function _f(){const{transitionRef,animationProgress,staticStyle,lerpWorklet}=jsThis._closure;{const{start:start,end:end}=transitionRef.value;const{value:value}=animationProgress;return{...staticStyle,left:lerpWorklet(value,start.left,end.left),bottom:lerpWorklet(value,start.bottom,end.bottom),width:lerpWorklet(value,start.width,end.width),height:lerpWorklet(value,start.height,end.height),backgroundColor:end.color};}}",e.__workletHash=8683403149442,e.__location="C:\\Users\\holyh\\source\\repos\\ReactTest\\wordApp\\src\\screens\\synonyms\\colorChart\\animatedRectangle.tsx (48:21)",e.__optimalization=2,e}(),[t]);return(0,O.jsx)(ie.default,{style:s})};function fe(e){var t=new Map,n=new Map;return e.forEach((function(e){var r,o=1+(null!=(r=n.get(e.end.color))?r:0);n.set(e.end.color,o),t.set(e.end.color+o,e)})),t}var de=l.default.create({view:{flexDirection:"row",position:"absolute",width:"100%",height:"100%"}}),he=1e3;const pe=function(e){var t=e.colorNormal,n=e.animationLength,o=e.size,i=e.style,u=function(e){var t=r.useState([]),n=(0,a.default)(t,2),o=n[0],i=n[1],u=r.useState(e(o)),l=(0,a.default)(u,2),s=l[0],c=l[1],f=r.useRef(new Map);!function(e,t){e.current.forEach((function(n,r){t.has(r)||e.current.delete(r)}))}(f,s);var d=r.useCallback((function(e,t){f.current.set(e,t)}),[]);return{array:o,setArray:r.useCallback((function(t,n){var r=e(t);i((function(e){return null==n||n(e),r.forEach((function(e,t){var n;return null==(n=f.current.get(t))?void 0:n(e)})),t})),c(r)}),[i,c,e]),registerSetter:d,keys:s}}(fe),l=u.registerSetter,c=u.keys,f=u.setArray,d=u.array,h=(0,re.useSharedValue)(1),p=(0,r.useCallback)((function(){var e=isNaN(n)?he:n;h.value=0,h.value=(0,oe.withTiming)(1,{duration:e})}),[n]);return(0,r.useEffect)((function(){if(null!=t&&t.IsValid){var e=function(e,t){var n,r;e=Array.from(e),t=Array.from(t);for(var o=e.length,a=t.length,i=(null==(n=e[0])?void 0:n.height)||(null==(r=t[0])?void 0:r.height)||0,u=0;u<Math.max(o,a);u+=1){var l,s,c,f,d,h;(null==(l=e[u])?void 0:l.color)!==(null==(s=t[u])?void 0:s.color)&&(o<=u||(null==(c=e[u])?void 0:c.color)==(null==(f=t[u+1])?void 0:f.color)?(Q(e,u,i,t[u].color),o+=1):a<=u||(null==(d=t[u])?void 0:d.color)==(null==(h=e[u+1])?void 0:h.color)?(Q(t,u,i,e[u].color),a+=1):(Q(e,u,i,t[u].color),Q(t,u+1,i,e[u+1].color),o+=1,a+=1))}return[e,t]}(d.map((function(e){var t,n,r,o=e.start,a=e.end;return t=h.value,r=a,new J(Z(t,(n=o).left,r.left),Z(t,n.bottom,r.bottom),Z(t,n.width,r.width),Z(t,n.height,r.height),r.color)})).filter((function(e){return 0!=e.width})),t.ToGradient().ToRectangle(o)),n=(0,a.default)(e,2),r=n[0],i=n[1],u=r.map((function(e,t){return{start:r[t],end:i[t]}}));f(u,(function(e){e.length&&p()}))}}),[t,o,f]),(0,O.jsx)(s.default,{style:[de.view,i],children:Array.from(c.keys()).map((function(e){return(0,O.jsx)(ce,{transition:c.get(e),dataKey:e,animationProgress:h,registerTransitionUpdates:l},e)}))})};function ve(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ye(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ve(Object(n),!0).forEach((function(t){(0,j.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ve(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ge=(0,r.memo)((function(e){var t=e.colorNormal,n=e.word,o=e.onPress,i=e.onLongPress,u=e.style,c=(0,r.useState)({height:0,width:0}),f=(0,a.default)(c,2),h=f[0],p=f[1],v=(0,r.useState)(!1),y=(0,a.default)(v,2),g=y[0],b=(y[1],(0,r.useMemo)((function(){var e,n=(null!=u?u:{}).zIndex,r=void 0===n?0:n;return l.default.create({chart:{zIndex:r+1},container:ye(ye({},u),{},{backgroundColor:null!=(e=null==t?void 0:t.getDominantColor())?e:"white"}),touchOverlay:{flex:1,position:"absolute",height:"100%",width:"100%",top:0,right:0,backgroundColor:"white",opacity:g?.5:0,zIndex:r+3},word:{flex:1,margin:5,marginHorizontal:10,fontSize:20,zIndex:r+2}})}),[u,g])),w=r.useRef(new ne.default.Value(0)).current;return r.useEffect((function(){ne.default.timing(w,{toValue:1,duration:500,useNativeDriver:!1}).start()}),[]),(0,O.jsx)(ne.default.View,{style:{opacity:w},children:(0,O.jsx)(te.default,{android_ripple:{color:m,foreground:!0},onPress:function(){return o(n)},onLongPress:function(){i(n)},style:function(e){var t=e.pressed;return{opacity:"android"!=z.default.OS&&t?.6:1}},children:(0,O.jsxs)(s.default,{style:b.container,onLayout:0==h.width?function(e){var t=e.nativeEvent;p({height:t.layout.height,width:t.layout.width})}:void 0,children:[0!=h.width&&(0,O.jsx)(pe,{colorNormal:t,style:b.chart,size:h}),(0,O.jsx)(s.default,{style:b.touchOverlay}),(0,O.jsx)(d.default,{style:b.word,children:n})]})})})}));const me=ge;var be=function(e){return e.ApiKeyEntered="api-key-entered",e.ApiChanged="api-changed",e.LayoutChanged="layout-changed",e.TileCountChanged="tile-count-changed",e.HintsReset="hints-reset",e}({}),we=n(5861),je=n(5519);function xe(e){return Oe.apply(this,arguments)}function Oe(){return(Oe=(0,we.default)((function*(e){return je.default.getItem(e)}))).apply(this,arguments)}function Se(e,t){return Ce.apply(this,arguments)}function Ce(){return(Ce=(0,we.default)((function*(e,t){return je.default.setItem(e,t)}))).apply(this,arguments)}var Pe=function(e){return e.WasLaunched="WasLaunched",e.DisabledVisulats="DisabledVisulats",e.TileLayout="TileLayout",e.TileCount="TileCount",e}({}),ke=l.default.create({innerView:{flex:1,flexDirection:"row",flexWrap:"wrap",justifyContent:"space-around",alignContent:"center",alignItems:"center",gap:7},synonymScrollContainer:{flexGrow:1,columnGap:100,paddingVertical:5}});var Ee=(0,O.jsx)(R.Transition.Change,{durationMs:100}),Te=30;const De=function(e){var t,n=e.synonyms,o=e.colorMap,i=e.wordToSortBy,u=e.addNewWord,l=e.addAndHiglight,c=e.showTooltip,d=e.style,h=(0,r.useRef)(),p=(0,r.useState)([]),v=(0,a.default)(p,2),y=v[0],g=v[1];(0,r.useEffect)((function(){var e=U.GetSorted(function(e){var t=e.map((function(e){return e.Word})),n=new Map,r=function(e){var t=n.get(e);return t||(t=new U(e),n.set(e,t)),t},o=function(e,n,o){for(var a of e)t.includes(a)||r(a).addConnection(n,o)};for(var a of e)for(var i of a.definitionSets)for(var u of i)for(var l of u)if(t.includes(l))for(var s of(o(u,l,1),i))s!==u&&o(s,l,2);else r(l).addConnection(a.Word,0);return Array.from(n.values())}(n),i);g(e),function(){var e;"android"==z.default.OS&&(null==(e=h.current)||e.animateNextTransition())}()}),[n,g]),(0,r.useEffect)((function(){g((function(e){return U.GetSorted(e,i)}))}),[i]);var m=(0,r.useState)(new Map),b=(0,a.default)(m,2),w=b[0],j=b[1];(0,r.useEffect)((function(){j((function(e){return function(e,t,n){var r=new Map;return e.forEach((function(e){var o=n.get(e.name),a=new ee(e.GetWordNormal(),t);a.IsValid&&r.set(e.name,null!=o&&o.isEqualTo(a)?o:a)})),r}(y,o,e)}))}),[y,o]);var x=(0,r.useState)(Te),S=(0,a.default)(x,2),C=S[0],P=S[1];(0,r.useEffect)((function(){var e=function(){xe(Pe.TileCount).then((function(e){var t;return P(null!=(t=parseInt(e))?t:Te)}))};e();var t=f.default.addListener(be.TileCountChanged,e);return function(){return t.remove()}}),[]),(0,r.useEffect)((function(){var e=Math.max(y.length-C,0);null==c||c(0==e?"":"Hidden: "+e)}),[c,C,y]);var k=r.useMemo((function(){var e;return{zIndex:(null!=(e=null==d?void 0:d.zIndex)?e:0)+1}}),[null==d?void 0:d.zIndex]),E=y.slice(-C).map((function(e){return(0,O.jsx)(me,{word:e.name,colorNormal:w.get(e.name),onPress:u,onLongPress:l,style:k},e.name)}));return(0,O.jsx)(M.default,{keyboardShouldPersistTaps:"handled",style:{zIndex:null!=(t=null==d?void 0:d.zIndex)?t:0},fadingEdgeLength:1,snapToEnd:!0,contentContainerStyle:ke.synonymScrollContainer,children:"android"==z.default.OS?(0,O.jsx)(R.Transitioning.View,{ref:h,style:ke.innerView,transition:Ee,children:E}):(0,O.jsx)(s.default,{style:ke.innerView,children:E})})};var We,Ae=function(e){return e.WrongAPIkey="Server denies request, check API key",e.NoWord="No word in the database",e}({}),Ie=function(){function e(t,n,r){(0,V.default)(this,e),this.fetcher=t,this.parser=n,this.normalizer=r}return(0,F.default)(e,[{key:"GetSynonyms",value:function(e){var t=this;return e=this.normalizer?this.normalizer.NormalizeWord(e):e,this.fetcher.FetchData(e).then((function(n){return t.parser.ParseData(n,e)}))}}]),e}(),ze=function(e){return e.Self="Default",e.Meriam="MeriamWebster",e.Datamuse="Datamuse",e}({}),Me=(We={},(0,j.default)(We,ze.Self,!1),(0,j.default)(We,ze.Meriam,!0),(0,j.default)(We,ze.Datamuse,!1),We);function Re(){return new Ie(new Fe,new Ve,new Ne)}var Ve=function(){function e(){(0,V.default)(this,e)}return(0,F.default)(e,[{key:"ParseData",value:function(e){try{var t,n=JSON.parse(e);if(0==n.length||void 0==(null==(t=n[0])?void 0:t.word))throw new Error(Ae.NoWord);return{type:"success",data:[n.map((function(e){return new Set([e.word])}))]}}catch(r){return{type:"error",errorMessage:r.message}}}}]),e}(),Fe=function(){function e(){(0,V.default)(this,e)}return(0,F.default)(e,[{key:"FetchData",value:function(){var e=(0,we.default)((function*(e){e.replace(" ","_");var t=yield fetch("https://api.datamuse.com/words?rel_syn="+e);if(!t.ok)throw new Error("Something went wrong: "+t.status);var n=yield t.text();if(!n)throw new Error("Empty response");return n}));return function(t){return e.apply(this,arguments)}}()}]),e}(),Ne=function(){function e(){(0,V.default)(this,e)}return(0,F.default)(e,[{key:"NormalizeWord",value:function(e){return e.replace(" ","_")}}]),e}();var Le=function(){function e(){(0,V.default)(this,e)}return(0,F.default)(e,[{key:"ParseData",value:function(e,t){if(function(e){return"Invalid API key. Not subscribed for this reference."===e}(e))return{type:"error",errorMessage:Ae.WrongAPIkey};try{var n=JSON.parse(e),r=[];if(0==n.length||void 0==n[0].meta)throw new Error(Ae.NoWord);return n.filter((function(e){return e.meta.id==t})).forEach((function(e){var t=[];e.meta.syns.forEach((function(e){(null==e?void 0:e.length)>0&&t.push(new Set(e))})),r.push(t)})),{type:"success",data:r}}catch(o){return{type:"error",errorMessage:o.message}}}}]),e}(),He=function(){function e(t){(0,V.default)(this,e),this.apiKey=t}return(0,F.default)(e,[{key:"FetchData",value:function(){var e=(0,we.default)((function*(e){var t=yield fetch("https://www.dictionaryapi.com/api/v3/references/thesaurus/json/"+e+"?key="+this.apiKey);if(!t.ok)throw new Error("Something went wrong: "+t.status);var n=yield t.text();if(!n)throw new Error("Empty response");return n}));return function(t){return e.apply(this,arguments)}}()}]),e}();var _e=n(7216),Be=function(){function e(){(0,V.default)(this,e)}return(0,F.default)(e,null,[{key:"Set",value:function(e,t){return _e.setItemAsync(Ge(e),t)}},{key:"Get",value:function(){var e=(0,we.default)((function*(e){return _e.getItemAsync(Ge(e))}));return function(t){return e.apply(this,arguments)}}()}]),e}(),Ge=function(e){return"key-"+e};function Ke(){return(Ke=(0,we.default)((function*(){var e,t=(yield qe())||ze.Self;switch(Me[t]&&(e=yield Be.Get(t)),t){case ze.Self:return Re();case ze.Meriam:return new Ie(new He(e),new Le);case ze.Datamuse:return Re()}}))).apply(this,arguments)}var Ue="current_api_name";function qe(){return Je.apply(this,arguments)}function Je(){return(Je=(0,we.default)((function*(){return(yield xe(Ue))||ze.Self}))).apply(this,arguments)}function Ze(e,t){return Qe.apply(this,arguments)}function Qe(){return(Qe=(0,we.default)((function*(e,t){var n=[];return n.push(Se(Ue,e)),e!=ze.Self&&t&&n.push(Be.Set(e,t)),Promise.all(n)}))).apply(this,arguments)}var Xe=n(5125),Ye=n(3439);function $e(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function et(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$e(Object(n),!0).forEach((function(t){(0,j.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$e(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}Xe.default(s.default);var tt=l.default.create({text:{fontSize:20,marginHorizontal:7,marginVertical:5},container:{paddingVertical:5,flexDirection:"row",alignItems:"flex-end"},list:{flex:5,flexDirection:"row",justifyContent:"flex-start",flexWrap:"wrap",alignSelf:"stretch",alignContent:"center",alignItems:"center",marginHorizontal:5,gap:5},highlighted:{borderWidth:3,borderColor:w,margin:-3}}),nt=(0,O.jsx)(R.Transition.Together,{children:(0,O.jsx)(R.Transition.Change,{durationMs:200})});const rt=function(e){var t=e.synonymArray,n=e.colorMap,o=e.highlighted,a=e.onPress,i=e.onLongPress,u=e.onClearButton,l=r.useRef();r.useEffect((function(){"android"==z.default.OS&&l.current.animateNextTransition()}),[t]);var c=t.map((function(e){var t=e.Word,r=e.IsEmpty,u=!e.WasFetched||r||!n.has(t)?g:n.get(t),l=t==o?tt.highlighted:[];return(0,O.jsx)(te.default,{android_ripple:{color:m},style:function(e){return function(e){return et(et({backgroundColor:u},l),{},{opacity:"android"!=z.default.OS&&e?.6:1})}(e.pressed)},onPress:function(){return a(t)},onLongPress:function(){i(t),"android"==z.default.OS&&Ye.selectionAsync()},children:(0,O.jsx)(d.default,{style:tt.text,children:t})},t)}));return(0,O.jsxs)(s.default,{style:tt.container,children:["android"==z.default.OS?(0,O.jsx)(R.Transitioning.View,{style:tt.list,transition:nt,ref:l,children:c}):(0,O.jsx)(s.default,{style:tt.list,children:c}),(0,O.jsx)(W,{disabled:0==t.length,name:"clear",onPress:u,style:{backgroundColor:m,disabledCountourColor:g,countourColor:w}})]})};var ot=l.default.create({view:{backgroundColor:m,borderColor:w,borderRadius:5,borderWidth:1,padding:6}});const at=function(e){var t=e.style,n=e.hintText,o=e.onPress,a=r.useState(new ne.default.Value(0))[0];return r.useEffect((function(){return ne.default.timing(a,{toValue:1,duration:1e3,useNativeDriver:!0}).start(),function(){ne.default.timing(a,{toValue:0,duration:1e3,useNativeDriver:!0}).start()}}),[]),(0,O.jsx)(ne.default.View,{style:[{opacity:a},ot.view,t],children:(0,O.jsx)(h.default,{onPress:o,children:(0,O.jsx)(d.default,{style:{fontSize:20},children:n})})})};function it(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ut(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?it(Object(n),!0).forEach((function(t){(0,j.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):it(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var lt=l.default.create({overlay:{position:"absolute",top:0,right:0,bottom:0,left:0,justifyContent:"center",alignItems:"center",fontSize:24,zIndex:3},hint:{zIndex:4,position:"absolute"}});const st=function(e){var t=e.currentHintID,n=e.synonymsExist,r=e.onHintPress;return(0,O.jsxs)(s.default,{style:lt.overlay,pointerEvents:"box-none",children:[0==t&&(0,O.jsx)(at,{style:ut(ut({},lt.hint),{},{bottom:130}),hintText:"Enter a word",onPress:r}),1==t&&n&&(0,O.jsx)(at,{style:ut(ut({},lt.hint),{},{bottom:"50%"}),hintText:"Add more related words",onPress:r}),2==t&&(0,O.jsx)(at,{style:ut(ut({},lt.hint),{},{bottom:120}),hintText:"Hold selected word to sort the results",onPress:r})]})};var ct=function(){function e(t){(0,V.default)(this,e),this.definitionSets=[],this.isEmpty=!1,this.wasFetched=!1,this.Word=function(e){return e.replace(/[^a-z0-9\s-]/gi,"").trim().toLowerCase()}(t)}return(0,F.default)(e,[{key:"set",value:function(e){this.wasFetched=!0,this.definitionSets=e,this.isEmpty=0==this.definitionSets.length}},{key:"Load",value:function(){var e=(0,we.default)((function*(e){var t=yield e.GetSynonyms(this.Word),n="success"==t.type?t.data:[];return this.set(n),t}));return function(t){return e.apply(this,arguments)}}()},{key:"IsEmpty",get:function(){return this.isEmpty}},{key:"WasFetched",get:function(){return this.wasFetched}}]),e}();var ft=n(4445);var dt=n(7301),ht=n(9220),pt=n(6085),vt=l.default.create({text:{left:20,fontSize:16},touchable:{padding:10},view:{flexDirection:"row",alignItems:"center"}});const yt=function(e){var t=e.title,n=e.state,r=e.onValueChange;return(0,O.jsx)(h.default,{onPress:function(){return r(!n)},style:vt.touchable,children:(0,O.jsxs)(s.default,{style:vt.view,children:[(0,O.jsx)(pt.default,{value:n,onValueChange:function(){return r(!n)}}),(0,O.jsx)(d.default,{style:vt.text,children:t})]})})};const gt=function(e){var t=e.navigation,n=(0,ft.useToast)(),o=r.useState(),i=(0,a.default)(o,2),u=i[0],l=i[1];r.useEffect((function(){qe().then((function(e){return l(e)}));var e=f.default.addListener(be.ApiKeyEntered,(function(e){var t=e.varName,r=e.varValue,o=t;u!=o||r?(l(o),Ze(o,r).then((function(){return f.default.emit(be.ApiChanged)}))):n.show("Please provide an API key to use "+o+" dictionary")}));return function(){return e.remove()}}),[]);var c=Object.values(ze).map((function(e){return{name:e,state:u==e}}));return(0,O.jsx)(s.default,{children:c.map((function(e){var n=e.name,r=e.state;return(0,O.jsx)(yt,{onValueChange:function(e){!function(e){var n=c.find((function(t){return t.name==e})).state;Me[e]?t.navigate("InputModal",{varName:e,varHint:"API key for "+e,varLink:"https://dictionaryapi.com/",eventName:be.ApiKeyEntered}):n||(l(e),Ze(e).then((function(){return f.default.emit(be.ApiChanged)})))}(n)},state:r,title:n},n)}))})};var mt=n(6459),bt=n(2790),wt=n.n(bt);l.default.create({view:{}});function jt(e){return e>=xt.uimax}var xt={step:10,min:20,max:70,uimax:80,default:30};const Ot=function(e){(0,mt.default)(e);var t=(0,r.useState)(-1),n=(0,a.default)(t,2),o=n[0],i=n[1],u=(0,r.useRef)();-1==o&&xe(Pe.TileCount).then((function(e){var t=function(e){var t=parseInt(e)||xt.default;return jt(t)?xt.uimax:t}(e);i(t)}));return(0,O.jsxs)(s.default,{style:{justifyContent:"center",alignItems:"center"},children:[(0,O.jsx)(d.default,{children:" Tile limit"}),(0,O.jsxs)(d.default,{children:[" ",o>xt.max?"No limit":o]}),(0,O.jsx)(wt(),{ref:u,style:{alignItems:"center",width:"90%",height:40},step:xt.step,value:o,minimumValue:xt.min,maximumValue:xt.uimax,onValueChange:function(e){var t;Se(Pe.TileCount,(jt(t=e)?1e3:t).toString()),i(e),f.default.emit(be.TileCountChanged)},minimumTrackTintColor:"#FFFFFF",maximumTrackTintColor:"#000000"})]})};function St(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ct(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?St(Object(n),!0).forEach((function(t){(0,j.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):St(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Pt=l.default.create({container:{flex:1},content:{left:20,paddingVertical:20},header:{flexDirection:"row",alignItems:"center",padding:16},linkText:{fontSize:15,color:"blue"},resetHints:{flexDirection:"row",alignItems:"center",gap:10},title:{marginLeft:16,fontSize:18,fontWeight:"bold"}}),kt="https://github.com/holyhamster/Synesis/",Et=function(e){return e.Display="Display",e.API="API",e.Hints="Hints",e.About="About",e}({});const Tt=function(e){var t,n,o=e.navigation,i=(null!=(t=e.route.params)?t:{unravel:void 0}).unravel;(0,r.useEffect)((function(){var e=Object.keys(Et).indexOf(i);e>=0&&b([e])}),[]);var u=(0,r.useState)(!1),l=(0,a.default)(u,2),c=(l[0],l[1]);xe(Pe.TileLayout).then((function(e){c(void 0!=e&&""!=e)}));var p=(n={},(0,j.default)(n,Et.Display,(0,O.jsx)(Ot,{})),(0,j.default)(n,Et.API,(0,O.jsx)(gt,{navigation:o})),(0,j.default)(n,Et.About,(0,O.jsx)(d.default,{style:Pt.linkText,onPress:function(){return dt.default.openURL(kt)},children:kt})),(0,j.default)(n,Et.Hints,(0,O.jsxs)(h.default,{style:Pt.resetHints,onPress:function(){"android"==z.default.OS&&Ye.selectionAsync(),Se(Pe.WasLaunched,"").then((function(){return f.default.emit(be.HintsReset)}))},children:[(0,O.jsx)(x.default,{name:"replay-circle-filled",size:30}),(0,O.jsx)(d.default,{style:{fontSize:15},children:"Reset Hints"})]})),n),v=r.useState([]),y=(0,a.default)(v,2),g=y[0],b=y[1];return(0,O.jsx)(s.default,{children:(0,O.jsx)(ht.default,{underlayColor:m,sections:Object.values(Et),activeSections:g,renderHeader:function(e,t,n){return(0,O.jsxs)(s.default,{style:Ct({},Pt.header),children:[n?(0,O.jsx)(x.default,{name:"expand-less",size:24,color:w}):(0,O.jsx)(x.default,{name:"expand-more",size:24,color:w}),(0,O.jsx)(d.default,{style:Pt.title,children:e})]},t)},renderContent:function(e){return(0,O.jsx)(s.default,{style:Pt.content,children:p[e]})||null},onChange:function(e){b((0,N.default)(e))}})})};var Dt=l.default.create({connectionIndicator:{position:"absolute",right:10,top:50,width:40,height:40,zIndex:1},container:{flex:1,backgroundColor:"white",justifyContent:"center",alignContent:"center"},inputContainer:{flexDirection:"row",backgroundColor:b,paddingVertical:5},menuButton:{flexDirection:"row",position:"absolute",left:10,top:50,zIndex:1},hiddenElementsTooltip:{left:5,alignItems:"center",justifyContent:"center",borderWidth:2,borderRadius:15,paddingHorizontal:5,backgroundColor:m},selectedList:{backgroundColor:b,paddingVertical:5}});const Wt=function(e){var t=e.navigation,n=r.useState(-1),o=(0,a.default)(n,2),l=o[0],p=o[1];(0,r.useEffect)((function(){var e=function(){return xe(Pe.WasLaunched).then((function(e){e||(Se(Pe.WasLaunched,"yes"),p(0))}))};e();var t=f.default.addListener(be.HintsReset,e);return function(){return t.remove()}}),[]);var y=r.useState(),g=(0,a.default)(y,2),m=g[0],b=g[1];(0,r.useEffect)((function(){var e=function(){return function(){return Ke.apply(this,arguments)}().then((function(e){return b(e)}))};e();var t=f.default.addListener(be.ApiChanged,e);return function(){return t.remove()}}),[]);var j=(0,r.useState)(""),x=(0,a.default)(j,2),S=x[0],C=x[1],P=function(e,t){var n=r.useState([]),o=(0,a.default)(n,2),i=o[0],u=o[1],l=(0,ft.useToast)();return(0,r.useEffect)((function(){u([])}),[e]),{synonyms:i,addWord:(0,r.useCallback)((function(t){u((function(n){var r=new ct(t),o=!r||""==r.Word,a=-1!=n.findIndex((function(e){return e.Word==r.Word}));return o||a?n:(r.Load(e).then((function(e){"error"==e.type&&l.show(e.errorMessage),u((function(e){return Array.from(e)}))})),[].concat((0,N.default)(n),[r]))}))}),[u,e]),removeWord:(0,r.useCallback)((function(e){u((function(n){var r=n.findIndex((function(t){return t.Word==e}));return r<0?n:(null==t||t(e),[].concat((0,N.default)(n.slice(0,r)),(0,N.default)(n.slice(r+1))))}))}),[u,t]),clearWords:(0,r.useCallback)((function(){return u([])}),[u])}}(m,(0,r.useCallback)((function(e){C((function(t){return t==e?"":t}))}),[C])),k=P.synonyms,E=P.addWord,T=P.removeWord,D=P.clearWords,A=(0,r.useRef)(new Map);A.current=function(e,t){var n=new Set;e.forEach((function(e,r){t.includes(r)&&n.add(e)}));var r=new Map;return t.forEach((function(t){var o=e.get(t)||v(Array.from(n));r.set(t,o),n.add(o)})),r}(A.current,k.map((function(e){return e.Word})));var z=(0,r.useState)(""),M=(0,a.default)(z,2),R=M[0],V=M[1],F=(0,r.useCallback)((function(e){E(e),C(e)}),[E,C]),L=(0,O.jsxs)(s.default,{style:Dt.menuButton,children:[(0,O.jsx)(W,{onPress:function(){return t.navigate("Options")},name:"settings",style:{size:50}}),""!=R&&(0,O.jsx)(h.default,{style:Dt.hiddenElementsTooltip,onPress:function(){t.navigate("Options",{unravel:Et.Display})},children:(0,O.jsx)(d.default,{children:R})})]}),H=null!=k.find((function(e){return!e.WasFetched}));return(0,O.jsxs)(u.SafeAreaView,{style:Dt.container,children:[(0,O.jsx)(i.default,{style:"auto"}),(0,O.jsx)(st,{onHintPress:function(){return p((function(e){return e+1}))},currentHintID:l,synonymsExist:k.length>0}),(0,O.jsx)(De,{synonyms:k.filter((function(e){return e.WasFetched&&!e.IsEmpty})),colorMap:A.current,addNewWord:E,addAndHiglight:F,wordToSortBy:S,showTooltip:function(e){return V(e)}}),L,(0,O.jsx)(s.default,{style:Dt.connectionIndicator,children:(0,O.jsx)(c.default,{pointerEvents:"none",animating:H,size:"large",color:w})}),(0,O.jsx)(s.default,{style:Dt.selectedList,children:(0,O.jsx)(rt,{synonymArray:k,colorMap:A.current,highlighted:S,onClearButton:D,onPress:function(e){return T(e)},onLongPress:function(e){return C(e)}})}),(0,O.jsx)(s.default,{style:Dt.inputContainer,children:(0,O.jsx)(I,{onAddWord:E})})]})};var At=n(4152),It=l.default.create({buttonView:{flexDirection:"row",gap:10},buttons:{},input:{backgroundColor:m,fontSize:20,width:"80%",justifyContent:"center",textAlign:"center"},linkText:{fontSize:20,color:"blue"},parentView:{flex:1,alignItems:"center",gap:10,justifyContent:"center"},hintText:{fontSize:25}});const zt=function(e){var t=e.navigation,n=e.route.params,o=n.eventName,i=n.varName,u=n.varHint,l=n.varLink,c=function(e){var t={varName:i,varValue:e};f.default.emit(o,t)},h=r.useState(""),v=(0,a.default)(h,2),y=v[0],g=v[1];return(0,O.jsxs)(s.default,{style:It.parentView,children:[(0,O.jsxs)(d.default,{style:It.hintText,children:["Enter ",null!=u?u:"variable"]}),(0,O.jsx)(d.default,{style:It.linkText,onPress:function(){return dt.default.openURL(l)},children:l}),(0,O.jsx)(p.default,{autoFocus:!0,blurOnSubmit:!0,value:y,onChangeText:function(e){g(e)},style:It.input,onSubmitEditing:function(e){var n=e.nativeEvent.text;n&&(c(n),t.goBack())}}),(0,O.jsxs)(s.default,{style:It.buttonView,children:[(0,O.jsx)(W,{name:"clear",onPress:function(){return t.goBack()},style:{size:50}}),(0,O.jsx)(W,{name:"check",onPress:function(){return c(y)},style:{size:50}})]})]})};var Mt=(0,n(7377).default)();function Rt(){return(0,O.jsx)(At.SafeAreaProvider,{children:(0,O.jsx)(ft.ToastProvider,{placement:"center",children:(0,O.jsx)(o.default,{children:(0,O.jsxs)(Mt.Navigator,{children:[(0,O.jsx)(Mt.Screen,{name:"Home",component:Wt,options:{headerShown:!1}}),(0,O.jsx)(Mt.Screen,{name:"Options",component:Tt}),(0,O.jsx)(Mt.Group,{screenOptions:{presentation:"modal"},children:(0,O.jsx)(Mt.Screen,{name:"InputModal",component:zt})})]})})})})}}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var a=t[r]={id:r,loaded:!1,exports:{}};return e[r].call(a.exports,a,a.exports,n),a.loaded=!0,a.exports}n.m=e,(()=>{var e=[];n.O=(t,r,o,a)=>{if(!r){var i=1/0;for(c=0;c<e.length;c++){for(var[r,o,a]=e[c],u=!0,l=0;l<r.length;l++)(!1&a||i>=a)&&Object.keys(n.O).every((e=>n.O[e](r[l])))?r.splice(l--,1):(u=!1,a<i&&(i=a));if(u){e.splice(c--,1);var s=o();void 0!==s&&(t=s)}}return t}a=a||0;for(var c=e.length;c>0&&e[c-1][2]>a;c--)e[c]=e[c-1];e[c]=[r,o,a]}})(),n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(r,o){if(1&o&&(r=this(r)),8&o)return r;if("object"===typeof r&&r){if(4&o&&r.__esModule)return r;if(16&o&&"function"===typeof r.then)return r}var a=Object.create(null);n.r(a);var i={};e=e||[null,t({}),t([]),t(t)];for(var u=2&o&&r;"object"==typeof u&&!~e.indexOf(u);u=t(u))Object.getOwnPropertyNames(u).forEach((e=>i[e]=()=>r[e]));return i.default=()=>r,n.d(a,i),a}})(),n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),n.p="/",(()=>{var e={179:0};n.O.j=t=>0===e[t];var t=(t,r)=>{var o,a,[i,u,l]=r,s=0;if(i.some((t=>0!==e[t]))){for(o in u)n.o(u,o)&&(n.m[o]=u[o]);if(l)var c=l(n)}for(t&&t(r);s<i.length;s++)a=i[s],n.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return n.O(c)},r=self.webpackChunkweb=self.webpackChunkweb||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})();var r=n.O(void 0,[709],(()=>n(9386)));r=n.O(r)})();
//# sourceMappingURL=main.25efdeb0.js.map